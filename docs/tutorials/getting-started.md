# clow99/NexusShine — Tutorial

Generated by NexusDocs from a scan of the repository at ref `main`.

## Tutorial

NexusShine is a web application for managing cleaning tasks and inspections across branches and locations. This tutorial walks you from cloning the repo to logging into the app and exploring the core flows.

---

### 1. Prerequisites

- Node.js (LTS) and npm installed
- A running MySQL-compatible database
- Access to create a database and user
- Git installed

---

### 2. Clone and install

```bash
git clone https://github.com/clow99/NexusShine.git
cd NexusShine
npm install
```

---

### 3. Configure environment variables

1. Copy the example env file:

   ```bash
   cp env.local.example .env.local
   ```

2. Edit `.env.local` and set at least:

   - `DATABASE_URL` — database connection string, e.g.:

     ```bash
     DATABASE_URL="mysql://user:password@localhost:3306/nexusshine"
     ```

3. Ensure the database exists and the user has permissions.

> If you are using Prisma migrations or seeding, run the appropriate commands as documented in the project README or your own workflow.

---

### 4. Run locally

Common scripts:

- `npm run dev` — `next dev`
- `npm run build` — `next build`
- `npm run start` — `next start`
- `npm run lint` — `eslint`
- `npm run test` — `node --test`
- `npm run smoke` — `npm run lint && node --test tests/smoke.test.js`

For development:

```bash
npm run dev
```

Then open `http://localhost:3000` in your browser.

For a production-like run:

```bash
npm run build
npm run start
```

---

### 5. First-time application setup

Once the app is running at `http://localhost:3000`:

1. **Create or access an admin user**

   - If the project includes a seed script, run it to create an initial admin user (see README or your team docs).
   - Otherwise, create a user directly in the database and assign the appropriate admin role/flag according to your schema.

2. **Sign in**

   - Use the login page (backed by `/api/auth/:...nextauth`) with your admin credentials.

3. **Configure global settings**

   - Navigate to the settings area (backed by `/api/settings`).
   - Adjust application-wide options such as notification behavior and theme (via `/api/theme`).

---

### 6. Core user flows

Below are typical flows you can walk through to verify your setup.

#### 6.1 Manage branches and locations

1. As an admin, go to the **Branches** section.
2. Create a new branch (uses `/api/branches`).
3. Within that branch, create one or more **Locations** (uses `/api/locations`).
4. Optionally, add **Bathrooms** for each location (uses `/api/bathrooms`).

This establishes the hierarchy: **Branch → Location → Bathroom**.

#### 6.2 Create tasks

1. Navigate to the **Tasks** section.
2. Create cleaning or inspection tasks associated with a location or bathroom (uses `/api/tasks`).
3. Assign tasks to users if your schema supports it.

#### 6.3 Run a cleaning cycle

1. From the UI, trigger or mark a cleaning event for a bathroom or location.
2. This will call the `/api/clean` endpoint to record the cleaning.
3. Verify that the bathroom or location status updates accordingly in the interface.

#### 6.4 Perform and track inspections

1. Use the inspection UI to start or log an inspection (uses `/api/inspection`).
2. If supported by your configuration:
   - Send reminders via `/api/inspection/remind`.
   - Clear or reset inspection status via `/api/inspection/clear`.
3. Confirm that inspection history or status is updated in the UI.

#### 6.5 Manage users

1. As an admin, open the **Users** section (uses `/api/users`).
2. Create or update users and assign roles/permissions as defined in your schema.
3. Test logging in as a non-admin user to see restricted views and capabilities.

---

### 7. Testing and quality checks

Run the linter:

```bash
npm run lint
```

Run the test suite:

```bash
npm test
```

Run a quick smoke check (lint + targeted tests):

```bash
npm run smoke
```

---

### 8. Common gotchas

- Ensure `DATABASE_URL` is correctly set and reachable before running `npm run dev` or `npm run build`.
- Some operations (e.g., managing users, branches, locations, tasks) require admin privileges.
- Theme changes are limited to predefined themes exposed by the UI and `/api/theme`.

---

### Next steps

1. Add screenshots and concrete user flows for:
   - Creating branches/locations/bathrooms
   - Creating and completing tasks
   - Running inspections and viewing reports
2. Link to the relevant sections in the User Guide and API Reference.
3. Document your team’s conventions for:
   - Seeding initial data (admin user, sample branches/locations)
   - Database migration workflow
   - Deployment targets and environment-specific configuration.